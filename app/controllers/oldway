            if player["gameserverip"] != nil || player["lobbysteamid"] != nil
              user = User.lookup(player["steamid"])
              if user.banned == false && user.display == true

                if player["gameid"].length > 7
                  #gameids over length 7 are mods
                  game_id = Mod.update(player, true)
                else
                  game_id = Game.update(player["gameid"],player["gameextrainfo"], true)                  
                end
                
                if game_id != nil
                  if player["gameserverip"] != nil && player["lobbysteamid"] != nil
                    puts "user: #{player["personaname"]}, #{player["gameextrainfo"]}"
                    puts "-> server: #{player["gameserverip"]}"
                    puts "-> server: #{player["lobbysteamid"]}"
                  elsif player["gameserverip"] != nil
                    puts "user: #{player["personaname"]}, #{player["gameextrainfo"]}"
                    puts "-> server: #{player["gameserverip"]}"
                  else
                    puts "user: #{player["personaname"]}, #{player["gameextrainfo"]}"
                    puts "-> server: #{player["lobbysteamid"]}" 
                  end

                  host_id = Host.update(player, game_id)
                  User.update(player, host_id, game_id)
                  u += 1

                  if player["gameserverip"] != nil
                    if !servers.include? player["gameserverip"]
                      servers.push(player["gameserverip"])
                    end
                  end

                  if player["lobbysteamid"] != nil
                    if !lobbies.include? player["lobbysteamid"]
                      lobbies.push(player["lobbysteamid"])
                    end
                  end
                end               
              end 
            elsif player["gameid"] != nil
              user = User.lookup(player["steamid"])
              if user != nil && user.banned == false && user.display == true
                if player["gameid"].length > 7
                  #gameids over length 7 are mods
                  game_id = Mod.update(player, false)
                else
                  game_id = Game.update(player["gameid"],player["gameextrainfo"], false)                  
                end
                
                if game_id != nil
                  puts "user: #{player["personaname"]}, #{player["gameextrainfo"]}"                  
                  User.update(player, nil, game_id)
                  n += 1
                end
              end
            end 
